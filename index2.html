<!DOCTYPE html>
<html>
<head>
  <title>Javascript Tetris</title>
</head>

<body>
  <script src="jquery-2.1.3.js"></script>
  <script>

    //Import twitter posts test
    $(document).ready(function() {
    lastDate = false;
    setInterval(function() {

      function compareDates (argument) {
        return (new Date(argument.created_at) > lastDate);
      }
      
       jQuery.ajax({
          url: 'http://search.twitter.com/search.json',
          type: 'GET',
          dataType: 'jsonp',
          data: {q: encodeURIComponent('#test')},
          
          success: function(data, textStatus, xhr) {
              if(!lastDate) {
                for(i in data.results) {
                    $('body').prepend('<p>'+data.results[i].from_user+': '+data.results[i].text+'</p>');
                }
              } else {
                var newMessages = data.results.filter(compareDates);
                  //Just for test
                  console.log(newMessages);
                for(i in newMessages) {
                    $('body').prepend('<p>'+newMessages[i].from_user+': '+newMessages[i].text+'</p>');
                }
              }
              
              lastDate = new Date(data.results[0].created_at);
          }
        });
      }, 10000);
    });
  </script>

</body>
</html>
